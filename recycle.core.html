<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><title>recycle.core documentation</title></head><body><header><section class="title"><h1><a href="index.html">Recycle Api Documentation</a></h1></section><small>Version: 0.1.0-SNAPSHOT</small></header><section class="container"><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>recycle</span></div></div></li><li class="depth-2 branch current"><a href="recycle.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="recycle.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><section class="namespace-docs" id="content"><h2 class="anchor" id="top">recycle.core</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-*timeout*"><h3><a href="#var-*timeout*">*timeout*</a></h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Maximum number of milliseconds to wait for a response from a service. This variable by default is nil, meaning the value used when creating the service is used.</p></div></div></div><div class="public anchor" id="var-.3F"><h3><a href="#var-.3F">?</a></h3><div class="usage"><code>(? service &amp; args)</code></div><div class="doc"><div class="markdown"><p>Alias for ask. Send args to service and return the result the service has for that invocation.</p></div></div></div><div class="public anchor" id="var-ask"><h3><a href="#var-ask">ask</a></h3><div class="usage"><code>(ask service &amp; args)</code></div><div class="doc"><div class="markdown"><p>Send args to service and return the result the service has for that invocation.</p></div></div></div><div class="public anchor" id="var-key"><h3><a href="#var-key">key</a></h3><div class="usage"><code>(key service)</code></div><div class="doc"><div class="markdown"><p>Returns the key that identifies service.</p></div></div></div><div class="public anchor" id="var-service"><h3><a href="#var-service">service</a></h3><div class="usage"><code>(service spec)</code></div><div class="doc"><div class="markdown"><p>Create a service using the spec map as a blueprint. The spec map may contain any of the following keys (all of the are optional):</p><p>:key - keyword that identifies the service</p><p>:map-config - function that modifies the config arg that is supplied to the :start function when starting the service.</p><p>:start - function that receives a config arg, starts the service, and returns its instance. By default a function that ignores the config arg and returns nil is used.</p><p>:stop - function that receives the instance of the service and stops it. By default a function that ignores the instance arg and returns nil is used.</p><p>:receive - function that receives the instance of the service, a variable number of args identifying the message sent to the service, and that dispatches the action corresponding to that message.</p><p>:timeout - maximum number of milliseconds to wait for a response from the service. It can be overriden also with the special variable <em>timeout</em>. By default is 1 minute.</p><p>:buf-or-n - core.async buffer or size of buffer to use for the service communication channel. By default is 1024.</p></div></div></div><div class="public anchor" id="var-service-map"><h3><a href="#var-service-map">service-map</a></h3><div class="usage"><code>(service-map spec)</code></div><div class="doc"><div class="markdown"><p>Create a service using the spec map as a blueprint. The spec map is a map of keywords identifying services to service-specs. Returns a service that will: - start (in any order) each service in the map when started</p>
<ul>
  <li><p>stop (in any order) each service in the map when stopped</p></li>
  <li><p>route messages to each service when asked, the first arg in ask identifies the service key in the map and the rest are used to ask the service</p></li>
</ul></div></div></div><div class="public anchor" id="var-start"><h3><a href="#var-start">start</a></h3><div class="usage"><code>(start service config)</code></div><div class="doc"><div class="markdown"><p>Starts service using config as the configuration. If service cannot start throws an ex-info. Returns nil.</p></div></div></div><div class="public anchor" id="var-started.3F"><h3><a href="#var-started.3F">started?</a></h3><div class="usage"><code>(started? service)</code></div><div class="doc"><div class="markdown"><p>Check if service is started. Returns true if it is, false if it&rsquo;s not.</p></div></div></div><div class="public anchor" id="var-stop"><h3><a href="#var-stop">stop</a></h3><div class="usage"><code>(stop service)</code></div><div class="doc"><div class="markdown"><p>Stops service. If service cannot stop throws an ex-info. Returns nil.</p></div></div></div><div class="public anchor" id="var-stopped.3F"><h3><a href="#var-stopped.3F">stopped?</a></h3><div class="usage"><code>(stopped? service)</code></div><div class="doc"><div class="markdown"><p>Check if service is stopped. Returns true if it is, false if it&rsquo;s not.</p></div></div></div></section></section></body></html>